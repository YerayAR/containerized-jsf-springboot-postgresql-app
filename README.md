# üöÄ Containerized JSF + Spring Boot + PostgreSQL Application

Una aplicaci√≥n web full-stack que demuestra un frontend JSF con backend Spring Boot y base de datos PostgreSQL, todo containerizado con Docker.

## üåü Caracter√≠sticas

- **Frontend**: JSF (JavaServer Faces) con PrimeFaces
- **Backend**: Spring Boot con Spring Security y JWT
- **Base de Datos**: PostgreSQL 13
- **Administraci√≥n de BD**: pgAdmin 4
- **Containerizaci√≥n**: Docker y Docker Compose
- **Seguridad**: Autenticaci√≥n JWT y autorizaci√≥n basada en roles

## üóÇÔ∏è Enlaces de la Aplicaci√≥n:

- **Inicio**: [http://localhost:8081/app/index.xhtml](http://localhost:8081/app/index.xhtml)
- **Cat√°logo de Productos**: [http://localhost:8081/app/products.xhtml](http://localhost:8081/app/products.xhtml)
- **Login**: [http://localhost:8081/app/login.xhtml](http://localhost:8081/app/login.xhtml)
- **Panel de Administraci√≥n**: [http://localhost:8081/app/admin.xhtml](http://localhost:8081/app/admin.xhtml)
- **pgAdmin**: [http://localhost:5050](http://localhost:5050) (Email: admin@admin.com, Password: admin)

## Usage

```bash
docker-compose up --build
```

- Frontend: <http://localhost:8081/app/>
- API REST: <http://localhost:8080/api/products>

## Build Notes

During the initial setup, the following fixes were applied:

1. **Frontend Dockerfile**: Corrected to reference the correct WAR file name (`frontend-1.0.0.war` instead of `frontend.war`) that is generated by the Maven build process.

2. **JSF Dependencies**: Added JSF implementation dependencies to the frontend `pom.xml` since Tomcat doesn't include JSF by default:
   - `com.sun.faces:jsf-api` and `com.sun.faces:jsf-impl` for JSF implementation
   - `org.jboss.weld.servlet:weld-servlet` for CDI support

These changes ensure that both the frontend container builds successfully and the JSF application works properly in Tomcat.

## Services

- **Database**: PostgreSQL 13 running on port 5432
- **Backend**: Spring Boot application with REST API on port 8080
- **Frontend**: JSF application deployed on Tomcat 9 on port 8081

## Sample Data

The database is pre-populated with 8 sample products across different categories:
- Electronics (Laptop, Smartphone, Headphones, Monitor)
- Books (Spring Boot Guide)
- Furniture (Office Desk)
- Food (Premium Coffee)
- Clothing (Cotton T-shirt)

Default admin credentials are `admin` / `password`. Authenticate via `POST /api/auth/login` to obtain a JWT.

You can access the sample data through:
- **API**: `GET http://localhost:8080/api/products`
- **Individual product**: `GET http://localhost:8080/api/products/{id}`
- **JSF Frontend**: http://localhost:8081/app/ (displays products in a formatted table)

## Frontend Features

The JSF frontend now includes:
- **Product List Display**: Shows all products from the backend API in a responsive table
- **Product Details**: Displays ID, name, description, price, category, and status
- **Styled Interface**: Clean, modern styling with alternating row colors and category badges
- **Real-time Data**: Fetches live data from the Spring Boot backend on each page load
- **Error Handling**: Shows appropriate messages if backend is unavailable
- **Login Page**: Authenticate with the backend to manage products

## Development

Sample data is loaded automatically on startup via a Spring `CommandLineRunner`.
Run tests with Maven:

```bash
mvn -f backend/pom.xml test
```
